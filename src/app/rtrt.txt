
import Button from '@mui/material/Button'
import './App.css'
import { Container, FormControl, MenuItem, Select, Table, TableBody, TableCell, TableHead, TableRow, Typography, InputLabel, TextField, Box, type SelectChangeEvent } from '@mui/material'
import { useDispatch } from 'react-redux'
import { useAppSelector } from './app/hooks';
import { setSelectedName, setFormData, updateFormField }  from './app/slices/nvoicefiels';
import Userdata from './data/user.json';




function Taxtxt() {
 const dispatch = useDispatch();
 const {selectedName, formData} = useAppSelector((state)=>state.invoiceFields);

const handledropdown = (event:SelectChangeEvent<string> ) => {
const name = event.target.value; 
dispatch(setSelectedName(name));
const namecompare =  Userdata.find((u)=>u.name===name);
if(namecompare){
dispatch(setFormData({
    invoiceNumber: namecompare?.invoiceNumber, 
  mobile: namecompare?.mobile,
  address: namecompare?.address,
  date: namecompare?.date,
  gender: namecompare?.gender,
  age: namecompare?.age
}))
}else{

  dispatch(setFormData({
    invoiceNumber: '', 
  mobile: '',
  address: '',
  date: '',
  gender: '',
  age: ''
}))
}

};


const handleTextChange = (event: React.ChangeEvent<HTMLInputElement>) => {
  const { name, value } = event.target;
  dispatch(updateFormField({ field: name as keyof typeof formData, value  }));
};


  return (
    <div className="App" >

      


      <Container maxWidth="lg" sx={{ bgcolor: 'grey.50', py: 4, borderRadius: 2 , border: '2px solid #ccc'}}>
    <h1>Invoice Form</h1>


{/* TODO: Replace with actual Dropdown import if available */}
 <FormControl sx={{ m: 1, minWidth: 120 }}>
        <InputLabel id="demo-simple-select-label">Name</InputLabel>
        <Select
          labelId="demo-simple-select-label"
          id="demo-simple-select"
          label="Name"
          value={selectedName}
         onChange={handledropdown}
          
          
        >

          <MenuItem value='Person 1'>ACC</MenuItem>
          <MenuItem value='Person 2'>ABB</MenuItem>
          <MenuItem value='Person 3'>ADD</MenuItem>
        </Select>
      </FormControl>
      <TextField
      name="invoiceNumber"
        id="outlined-basic"
        label="Invoice Number"
        variant="outlined"
        sx={{ m: 1, minWidth: 120 }}
         value={formData.invoiceNumber}
  onChange={handleTextChange}
      />
      
      <TextField
        id="outlined-basic"
        label="Mobile Number"
        variant="outlined"
        sx={{ m: 1, minWidth: 120 }}
      value={formData.mobile}
      />
      <TextField
        id="outlined-basic"
        label="Address"
        variant="outlined"
        sx={{ m: 1, minWidth: 120 }}
        value={formData.address}
      />
      <TextField
        id="outlined-basic"
        label="Date"
        variant="outlined"
        sx={{ m: 1, minWidth: 120 }}
      />
      <TextField
        id="outlined-basic"
        label="Gender"
        variant="outlined"
        sx={{ m: 1, minWidth: 120 }}
      />
      <TextField
        id="outlined-basic"
        label="Age"
        variant="outlined"
        sx={{ m: 1, minWidth: 120 }}
      />
      </Container>


      

          <Container
      maxWidth="lg"
      sx={{
        bgcolor: 'grey.200',
        py: 4,
        borderRadius: 2,
        border: '2px solid #ccc',
        height: '50vh',
        overflow: 'hidden',
      }}
    >
      <Typography variant="h5" gutterBottom>
        Items Selected Table
      </Typography>

      <Table sx={{ border: '1px solid #ccc' }}>
        <TableHead>
          <TableRow>
            <TableCell><strong>Item</strong></TableCell>
            <TableCell><strong>Quantity</strong></TableCell>
            <TableCell><strong>Price</strong></TableCell>
                        <TableCell><strong>Total Price</strong></TableCell>
                                    <TableCell><strong>GST (18%)</strong></TableCell>


          </TableRow>
        </TableHead>
        <TableBody>
          <TableRow>
            <TableCell>Item 1</TableCell>
            <TableCell>Quantity 1</TableCell>
            <TableCell>Price 1</TableCell>
            <TableCell>Total</TableCell>
            <TableCell>Gst</TableCell>
          </TableRow>
          <TableRow>
            <TableCell>Item 2</TableCell>
            <TableCell>Quantity 2</TableCell>
            <TableCell>Price 2</TableCell>
             <TableCell>Total</TableCell>
            <TableCell>Gst</TableCell>
          </TableRow>
          <TableRow>
            <TableCell>Item 3</TableCell>
            <TableCell>Quantity 3</TableCell>
            <TableCell>Price 3</TableCell>
             <TableCell>Total</TableCell>
            <TableCell>Gst</TableCell>
          </TableRow>
          <TextField
        id="outlined-basic"
        label="Total with GST"
        variant="outlined"
        size='small'
        sx={{ m: 1, mt: 2, transform: 'translateX(320%)', minWidth: 50,height: 50, width: 150 
         }}
      />
        </TableBody>
      </Table>
    </Container>

    <Box fontSize={60} sx={{ display: 'flex', justifyContent: 'flex-end', mt: 2 ,mr: 40 }}>
      <Button size='large' variant="contained" color="primary">
        
        Submit

      </Button>
    </Box>
    
  </div>
  )
}

export default Taxtxt